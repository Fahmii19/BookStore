$(document).ready(function(){var e=$(".reader__modal"),o=$(".reader-trigger-pagenext"),r=$(".reader-trigger-pageprev"),t=$(".reader-trigger-zoomin"),a=$(".reader-trigger-zoomout");function n(){e.show(),t.add(a).add(o).add(r).off("click"),setTimeout(function(){e.addClass("show")},1e3)}google.books.load(),google.books.setOnLoadCallback(function(){var i=new google.books.DefaultViewer(document.getElementById("readerViewer"));function c(e){return Math.round(e/494*100)}window.viewer=i;var d=$(".reader-pagenum"),s=$(".reader-pagepercentage"),l=$(".reader__scrubber__progress"),g=Math.floor(2*Math.random())+3,u=Date.now();i.load("ISBN:",function(){setTimeout(function(){$(".reader__loader").fadeOut("slow"),$(".readerViewerFb").removeClass("d-none"),e.css("height","100%")},1e3);var i=$(".readerViewerFb"),f=i.find("ul");function m(){return f.find("li").map(function(e){return 0==e?0:$(this).position().top*(f.css("zoom")||1)})}a.click(function(){f.css("zoom",""+(parseFloat(f.css("zoom")||1)-.1))}),t.click(function(){f.css("zoom",""+(parseFloat(f.css("zoom")||1)+.1))}),o.click(function(){var e,o=m();for(e=0;e<o.length&&!(i.scrollTop()+10<o[e]);e++);o[1+--e]&&i.scrollTop(o[e+1])}),r.click(function(){var e,o=m();for(e=0;e<o.length&&!(i.scrollTop()+10<o[e]);e++);void 0!==o[--e-1]&&i.scrollTop(o[e-1])}),setInterval(function(){var e,o=m();for(e=0;e<o.length&&!(i.scrollTop()+10<o[e]);e++);d.text(e);var r=c(e);s.text(r),l.css("width",c(e)+"%"),Date.now()-u>5e3&&e>=g&&n()},250)},function(e){if(void 0===i.getPageNumber()){for(var f=[];;){var m=i.getPageId();if(f.indexOf(m)>=0)break;f.push(m),i.nextPage()}i.getPageNumber=function(){return f.indexOf(i.getPageId())+1},i.goToPage=function(e){i.goToPageId(f[e-1])},i.goToPage(1)}t.click(i.zoomIn),a.click(i.zoomOut),o.click(i.nextPage),r.click(i.previousPage),$(".reader__loader").fadeOut("slow"),setInterval(function(){var e=i.getPageNumber();d.text(e);var o=c(e);s.text(o),l.css("width",o+"%"),Date.now()-u>5e3&&e>=g&&n()},250),setTimeout(function(){for(var e=0;e<5;e++)i.zoomOut()},100),$("#readerViewer").removeClass("d-none")})})});